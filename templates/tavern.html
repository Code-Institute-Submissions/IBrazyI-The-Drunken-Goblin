{% extends "base.html" %}
{% block content %}



<div class="row">
    <div class="background-image-tavern white-text">
        <div class="form-container faded-background">
        <form action="{{ url_for('search') }}" method="POST" class="col s12 m6 offset-m6">
            <div class="row">
                <div class="col s8  offset-s2  search-box center">
                    <input type="text" placeholder="Search" name="query" id="query" class="center validate" required>
                </div>
            </div>
            <div class="row">
                <div class="col s6 center">
                    <button type="submit" class="btn-small">Search</button>
                </div>
                <div class="col s6 center">
                    <a class="btn-small" href="{{ url_for('tavern') }}">Clear</a>
                </div>
            </div>
        </form>
        <div class="row">
            <div class="col s10 offset-s1 center">
            <h4>Welcome to the Tavern!</h4>
            <p class="info-text">Here you can see all the Heroes currently inside. If you know who your looking for, or know what type of Hero you need dont be afraid to search for them!</p>
            <p class="info-text">Selecting Save and Unsave Character will save the character to your profile and remove the character respectivley.</p>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col s8 offset-s2">
        <div class="character_divider"></div>
    </div>
</div>

<div class="row valign-wrapper hide-on-med-and-down">
    <div class="col s10 offset-s1">
        <div class="col l2"><h4>Portrait</h4></div>
        <div class="col l1"><h4>Name</h4></div>
        <div class="col l1"><h4>Race</h4></div>
        <div class="col l1"><h4>Class</h4></div>
        <div class="col l1"><h4>Likes</h4></div>
        <div class="col l1"><h4>Dislikes</h4></div>
        <div class="col l"><h4>Backstory</h4></div>
        <div class="col l2"><h4>Save/Unsave</h4></div>
    </div>
</div>


{% for character in characters %}
    {% if character|length > 0 %}
        <div class="row">
            <div class="col s10 offset-s1 tavern_characters grey darken-1 white-text valign-wrapper center">
                <div class="row">
                    <div class="row">
                        <div class="character-image col s8 offset-s2"><img src="{{ character.character_image }}"></div>
                        <div class="col s8 offset-s2"><span class="hide-on-large-and-up">Name: </span>{{ character.character_name }}</div>
                        <div class="col s8 offset-s2"><span class="hide-on-large-and-up">Race: </span>{{ character.character_race }}</div>
                        <div class="col s8 offset-s2"><span class="hide-on-large-and-up">Class: </span>{{ character.character_class }}</div>
                        <div class="col s8 offset-s2"><span class="hide-on-large-and-up">Likes: </span>{{ character.character_likes }}</div>
                        <div class="col s8 offset-s2"><span class="hide-on-large-and-up">Dislikes: </span>{{ character.character_dislikes }}</div>
                        <div class="col s8 offset-s2"><span class="hide-on-large-and-up">Bio: </span>{{ character.character_bio }}</div>
                        <div class="col s5 save-buttons offset-s1"><a class="save-button-text" href="{{ url_for('removesavecharacter', character_id=character._id) }}"><i class="fas fa-heart-broken"></i>Unsave Character</a></div>
                        <div class="col s5 save-buttons "><a class="save-button-text" href="{{ url_for('savecharacter', character_id=character._id) }}"><i class="fas fa-heart"></i>Save Character</a></div>
                    </div>
                {% if character["character_user"] == session.user %}
                    <div class="row">
                        <div class="col s6"><a class="character-button waves-effect waves-light btn-small" href="{{ url_for('edit', character_id=character._id) }}">Edit Hero</a></div>
                        <div class="col s6"><a class="character-button waves-effect waves-light btn-small" href="{{ url_for('delete', character_id=character._id) }}">Delete Hero</a></div>
                    </div>
                    {% else %}
                {% endif %}
                </div>
            </div>
        </div>
    {% endif %}
{% endfor %}
{% endblock %}